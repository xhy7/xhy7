function toggleLike(postId) {
    // 初始化存储结构
    let storage = JSON.parse(localStorage.getItem('hexoLikes') || '{}');
    if (!storage[postId]) {
        storage[postId] = { count: 0, clicked: false };
    }

    // 点赞/取消逻辑
    const btn = document.getElementById(`like-${postId}`).querySelector('.like-btn');
    if (!storage[postId].clicked) {
        storage[postId].count++;
        btn.classList.add('liked');
        btn.innerHTML = '<i class="iconfont icon-like-fill"></i>'; // 切换为实心图标
    } else {
        storage[postId].count--;
        btn.classList.remove('liked');
        btn.innerHTML = '<i class="iconfont icon-like"></i>';
    }
    
    storage[postId].clicked = !storage[postId].clicked;
    localStorage.setItem('hexoLikes', JSON.stringify(storage));
    document.getElementById(`count-${postId}`).textContent = storage[postId].count;
}

// 页面加载时初始化状态
document.addEventListener('DOMContentLoaded', () => {
    const containers = document.querySelectorAll('.like-container');
    containers.forEach(container => {
        const postId = container.id.split('-')[1];
        const storage = JSON.parse(localStorage.getItem('hexoLikes') || '{}');
        if (storage[postId]) {
            container.querySelector('.like-count').textContent = storage[postId].count;
            if (storage[postId].clicked) {
                container.querySelector('.like-btn').classList.add('liked');
            }
        }
    });
});